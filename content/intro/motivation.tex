\section{Motivation}
In software development, automated tests are one of the key tools
to achieve a high level of software quality.
Writing tests efficiently itself requires good support
from the programming language, standard library, or third party tools.
The two types of such testing tools we will primarily look at are
\begin{itemize}
  \item \textit{assertion libraries} and
  \item \textit{stubbing / mocking libraries}.
\end{itemize}
Both can be standalone or part of a greater testing framework or utility library.
The former are used to specify a part of the \textit{test oracle},
deciding whether a test case is considered to pass successfully or fail with an error.
The latter are particularly important for substituting subsystems in component testing,
and mock expectations can also form another part of the test oracle.

Assertions are often encoded as chained function calls,
sometimes called \textit{BDD (behavior-driven development)} style,
or in a more classical style as plain calls to an assertion function:
\autocite{ChaiBddDoc}\autocite{ChaiTddDoc}
\begin{minted}{javascript}
expect(1).to.equal(1);
assert(1 === 1);
\end{minted}
Stubbing and mocking libraries tend to follow a similar API design approach:
\autocite{SinonStubDoc}\autocite{SinonMockDoc}
\begin{minted}{javascript}
const doubleStub = stub().withArgs(21).returns(42);
const myMock = mock(myApi).expects("method")
                          .once().withArgs(42, 1337);
\end{minted}

TODO too much boilerplate, doesn't feel natural, is there a cleaner way?
